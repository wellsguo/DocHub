# 人脸识别技术


## 十个基本概念

人脸识别技术主要包括`人脸检测`、<code>人脸配准</code>、`人脸识别`、人脸验证、人脸比对、人脸检索、人脸聚类、人脸活体、人脸特征提取、人脸属性等十个基本概念。

### 人脸检测

Face Detection 检测出图像中人脸所在位置的一项技术。常见的人脸检测算法基本上都是一个`扫描`加`判别`的过程，即算法在图像范围内扫描，再逐个判定候选区域是否是人脸的过程。因此人脸检测算法的计算速度会跟图像尺寸、图像内容相关。开发过程中，我们可以通过设置“输入图像尺寸”、或“最小脸尺寸限制”、或“人脸数量上限”的方式来加速算法。

### 人脸配准

Face Alignment 是定位出人脸上五官关键点坐标的一项技术。人脸配准算法的输入是“一张人脸图片”加“人脸坐标框”，输出五官关键点的坐标序列。五官关键点的数量是预先设定好的一个固定数值，可以根据不同的语义来定义（常见的有5点、68点、90点等等）。

当前效果的较好的一些人脸配准技术，基本通过深度学习框架实现，这些方法都是基于人脸检测的坐标框，按某种事先设定规则将人脸区域扣取出来，缩放的固定尺寸，然后进行关键点位置的计算。因此，若不计入图像缩放过程的耗时，人脸配准算法是可以计算量固定的过程。另外，相对于人脸检测，或者是后面将提到的人脸提特征过程，人脸配准算法的计算耗时都要少很多。

### 人脸识别  

Face Recognition 是识别出输入人脸图对应身份的算法。它的输入一个人脸特征，通过和注册在库中N个身份对应的特征进行逐个比对，找出“一个”与输入特征相似度较高的特征。将这个较高相似度值和预设的阈值相比较，如果大于阈值，则返回该特征对应的身份，否则返回“不在库中”。

## 测试环境  

1. 摄像输入
  - IP摄像头（1280x720,25fps）
  - 笔记本自带摄像头（640x480）

2. PC机

  - i7-7500 @2.70GHz 2.90GHz 笔记本
  - i7-8700K @ 3.70GHz × 12 & GeForce GTX 1080 台式机

3. 操作系统
  - Windows 10(64Bits)
  - Ubuntu  16.04(64Bits)

4. 测试数据集
  - lfw
  - fddb



## 主流库及其特点

+ OpenCV 
  - 可跨平台实现人脸检测且实现简单，但检测识别率和工作效率都不高。 
  
Platform | Processor |  720p   | Sampling(1/2) |  VGA   
-------- |-------| ------  |  ------------ | ---      
Window   | i7-7500 @2.70GHz 2.90GHz         |  500±ms |  130±ms       | 220±ms    
Linux    | i7-8700K CPU @ 3.70GHz × 12 |  60±ms  |  20±ms        |  --       
 
+ Dlib  
 - 可跨平台实现人脸检测、人脸配置和人脸识别，检测准确率高但检测速度慢。  

|  Platform | Processor                   |  720p   | Sampling(1/2) |  
|  -------- |  -------                    | ------  |  ------------ |  
|  Window   | i7-7500 @2.70GHz 2.90GHz         |  300±ms |  110±ms       |   
|  Linux    | i7-8700K CPU @ 3.70GHz × 12 |  90±ms  |  30±ms        |   

+ libfacedetection  
 - 深大于仕琪老师提供。采用传统算法，运行效率高，对于720p视频处理基本能保证其流畅运行。
 - 但该库只能运行在Windows平台上，无法通过CUDA或其他方法加速。
  
|  Platform | Processor                   |  720p   | Sampling(1/2) |   VGA  |   OrientPriority  |  Occlusion   |
  |  -------- |  -------                    | ------  |  ------------ | -----  |   -------------   |  ----  |    
  |  Window   | i7-7500 @2.70GHz 2.90GHz         |  60±ms  |  20±ms        | 20±ms  | -- | -- |

+ 虹软ArcFace  
 - 虹软人脸识技术同样采用的传统算法，运行速度较快，代码已经封装，无法进行修改。
 - 人脸检测速度快，检测精度高
 - 对偏转角度在-30°~30°，俯仰角度
 - 对于遮挡的支持

|  Platform | Processor                   |  720p      |      Sampling(1/2)   | VGA |
  |  -------- |  -------                    | ------     |  ------------ |  ---   |
  |  Window   | i7-7500 @2.70GHz 2.90GHz    |  20±ms    |   &lt;20ms       | 10~40ms |
  |  Linux    | i7-8700K CPU @ 3.70GHz × 12 |  20±ms  |  &lt;20ms     | -- |

+ SeetaFace  
 - 基于OpenCV和DLib的实现，但仍存在运行效率低的缺点。
  
|  Platform | Processor                   |  720p      |      Sampling(1/2)   | VGA |
|  -------- |  -------                    | ------     |  ------------ |  ---   |
|  Window(TODO)   | i7-7500 @2.70GHz 2.90GHz    |  20±ms    |   &lt;20ms       | 10~40ms |
|  Linux    | i7-8700K CPU @ 3.70GHz × 12 |  100±ms  |  30±ms     | -- |

+ OpenFace  
 - 基于matlab和C++的混合开发，且属于学术性研究项目
 - 提供了多种解决方案，包括人脸检测、表情识别、关注点检测等
 - 工作平台基于Windows

